---
import Layout from "../../layouts/Layout.astro";
import { SetDetailsView } from "../../components/SetDetailsView";

// Check authentication
const supabase = Astro.locals.supabase;
const {
  data: { user },
  error,
} = await supabase.auth.getUser();

if (error || !user) {
  return Astro.redirect("/login");
}

// Get set ID from URL
const { id } = Astro.params;
const setId = parseInt(id || "", 10);

if (isNaN(setId) || setId <= 0) {
  return Astro.redirect("/dashboard");
}
---

<Layout title="Szczegóły zestawu">
  <SetDetailsView setId={setId} client:load />
</Layout>
