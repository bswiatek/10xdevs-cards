---
import Layout from "@/layouts/Layout.astro";
import { ChangePasswordForm } from "@/components/account/ChangePasswordForm";

// Protect route - require authentication
const { data: { session } } = await Astro.locals.supabase.auth.getSession();

if (!session) {
  return Astro.redirect("/login");
}
---

<Layout title="Zmiana hasła - Generator Fiszek AI">
  <div class="container mx-auto max-w-2xl px-4 py-8">
    <!-- Header -->
    <header class="mb-8">
      <h1 class="text-3xl font-bold mb-2">Zmiana hasła</h1>
      <p class="text-muted-foreground">
        Zmień swoje hasło dostępu do konta. Po zmianie wszystkie sesje zostaną unieważnione.
      </p>
    </header>

    <!-- Change Password Form -->
    <div class="rounded-lg border bg-card p-6 shadow-sm">
      <ChangePasswordForm client:load />
    </div>

    <!-- Back Link -->
    <div class="mt-6">
      <a href="/" class="text-sm text-primary hover:underline"> ← Wróć do głównego widoku </a>
    </div>
  </div>
</Layout>
